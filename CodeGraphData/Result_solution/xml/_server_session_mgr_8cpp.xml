<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="_server_session_mgr_8cpp" kind="file">
    <compoundname>ServerSessionMgr.cpp</compoundname>
    <includes refid="_server_session_mgr_8h" local="yes">ServerSessionMgr.h</includes>
    <includes refid="_se_file_log_8h" local="yes">SeFileLog.h</includes>
    <includes refid="_se_server_tool_8h" local="yes">SeServerTool.h</includes>
    <incdepgraph>
      <node id="140520">
        <label>list</label>
      </node>
      <node id="140514">
        <label>locale</label>
      </node>
      <node id="140524">
        <label>queue</label>
      </node>
      <node id="140518">
        <label>limits</label>
      </node>
      <node id="140536">
        <label>SePtlCommDefine.h</label>
        <link refid="_se_ptl_comm_define_8h"/>
      </node>
      <node id="140498">
        <label>SeMemPool.h</label>
        <link refid="_se_mem_pool_8h"/>
        <childnode refid="140499" relation="include">
        </childnode>
        <childnode refid="140527" relation="include">
        </childnode>
        <childnode refid="140506" relation="include">
        </childnode>
      </node>
      <node id="140501">
        <label>windows.h</label>
      </node>
      <node id="140506">
        <label>assert.h</label>
      </node>
      <node id="140496">
        <label>F:/TeamWork/ServerVersion/projects/server/Share/ServerBase/ServerSessionMgr.cpp</label>
        <link refid="ServerSessionMgr.cpp"/>
        <childnode refid="140497" relation="include">
        </childnode>
        <childnode refid="140540" relation="include">
        </childnode>
        <childnode refid="140541" relation="include">
        </childnode>
      </node>
      <node id="140504">
        <label>stdlib.h</label>
      </node>
      <node id="140527">
        <label>EsLock.h</label>
      </node>
      <node id="140508">
        <label>cmath</label>
      </node>
      <node id="140517">
        <label>string</label>
      </node>
      <node id="140521">
        <label>map</label>
      </node>
      <node id="140540">
        <label>SeFileLog.h</label>
        <link refid="_se_file_log_8h"/>
        <childnode refid="140538" relation="include">
        </childnode>
        <childnode refid="140510" relation="include">
        </childnode>
        <childnode refid="140527" relation="include">
        </childnode>
      </node>
      <node id="140503">
        <label>conio.h</label>
      </node>
      <node id="140535">
        <label>SePtlRandomNumDef.h</label>
        <link refid="_se_ptl_random_num_def_8h"/>
      </node>
      <node id="140502">
        <label>direct.h</label>
      </node>
      <node id="140515">
        <label>fstream</label>
      </node>
      <node id="140531">
        <label>SeTool.h</label>
        <link refid="_se_tool_8h"/>
        <childnode refid="140499" relation="include">
        </childnode>
        <childnode refid="140529" relation="include">
        </childnode>
        <childnode refid="140532" relation="include">
        </childnode>
        <childnode refid="140533" relation="include">
        </childnode>
        <childnode refid="140512" relation="include">
        </childnode>
        <childnode refid="140534" relation="include">
        </childnode>
      </node>
      <node id="140500">
        <label>winsock2.h</label>
      </node>
      <node id="140497">
        <label>ServerSessionMgr.h</label>
        <link refid="_server_session_mgr_8h"/>
        <childnode refid="140498" relation="include">
        </childnode>
        <childnode refid="140528" relation="include">
        </childnode>
        <childnode refid="140529" relation="include">
        </childnode>
        <childnode refid="140530" relation="include">
        </childnode>
        <childnode refid="140537" relation="include">
        </childnode>
      </node>
      <node id="140533">
        <label>TeMisc.h</label>
        <link refid="_te_misc_8h"/>
        <childnode refid="140511" relation="include">
        </childnode>
      </node>
      <node id="140511">
        <label>string.h</label>
      </node>
      <node id="140509">
        <label>ctime</label>
      </node>
      <node id="140528">
        <label>TeNetMgr.h</label>
      </node>
      <node id="140519">
        <label>vector</label>
      </node>
      <node id="140539">
        <label>MobaApi.hpp</label>
        <link refid="_moba_api_8hpp"/>
      </node>
      <node id="140525">
        <label>new</label>
      </node>
      <node id="140530">
        <label>SePtlDefine.h</label>
        <link refid="_se_ptl_define_8h"/>
        <childnode refid="140499" relation="include">
        </childnode>
        <childnode refid="140529" relation="include">
        </childnode>
        <childnode refid="140531" relation="include">
        </childnode>
        <childnode refid="140535" relation="include">
        </childnode>
        <childnode refid="140536" relation="include">
        </childnode>
        <childnode refid="140498" relation="include">
        </childnode>
      </node>
      <node id="140529">
        <label>SeShareDef.h</label>
        <link refid="_se_share_def_8h"/>
        <childnode refid="140499" relation="include">
        </childnode>
      </node>
      <node id="140516">
        <label>sstream</label>
      </node>
      <node id="140534">
        <label>EsString.h</label>
      </node>
      <node id="140499">
        <label>SeInclude.h</label>
        <link refid="_se_include_8h"/>
        <childnode refid="140500" relation="include">
        </childnode>
        <childnode refid="140501" relation="include">
        </childnode>
        <childnode refid="140502" relation="include">
        </childnode>
        <childnode refid="140503" relation="include">
        </childnode>
        <childnode refid="140504" relation="include">
        </childnode>
        <childnode refid="140505" relation="include">
        </childnode>
        <childnode refid="140506" relation="include">
        </childnode>
        <childnode refid="140507" relation="include">
        </childnode>
        <childnode refid="140508" relation="include">
        </childnode>
        <childnode refid="140509" relation="include">
        </childnode>
        <childnode refid="140510" relation="include">
        </childnode>
        <childnode refid="140511" relation="include">
        </childnode>
        <childnode refid="140512" relation="include">
        </childnode>
        <childnode refid="140513" relation="include">
        </childnode>
        <childnode refid="140514" relation="include">
        </childnode>
        <childnode refid="140515" relation="include">
        </childnode>
        <childnode refid="140516" relation="include">
        </childnode>
        <childnode refid="140517" relation="include">
        </childnode>
        <childnode refid="140518" relation="include">
        </childnode>
        <childnode refid="140519" relation="include">
        </childnode>
        <childnode refid="140520" relation="include">
        </childnode>
        <childnode refid="140521" relation="include">
        </childnode>
        <childnode refid="140522" relation="include">
        </childnode>
        <childnode refid="140523" relation="include">
        </childnode>
        <childnode refid="140524" relation="include">
        </childnode>
        <childnode refid="140525" relation="include">
        </childnode>
        <childnode refid="140526" relation="include">
        </childnode>
      </node>
      <node id="140538">
        <label>time.h</label>
      </node>
      <node id="140505">
        <label>math.h</label>
      </node>
      <node id="140512">
        <label>EsType.h</label>
      </node>
      <node id="140507">
        <label>cctype</label>
      </node>
      <node id="140532">
        <label>SeToolTemplate.inl</label>
        <link refid="_se_tool_template_8inl"/>
      </node>
      <node id="140537">
        <label>utils/Clock.hpp</label>
        <link refid="_clock_8hpp"/>
        <childnode refid="140527" relation="include">
        </childnode>
        <childnode refid="140538" relation="include">
        </childnode>
        <childnode refid="140539" relation="include">
        </childnode>
      </node>
      <node id="140522">
        <label>unordered_map</label>
      </node>
      <node id="140526">
        <label>SeDefine.h</label>
        <link refid="_se_define_8h"/>
      </node>
      <node id="140541">
        <label>SeServerTool.h</label>
        <link refid="_se_server_tool_8h"/>
        <childnode refid="140499" relation="include">
        </childnode>
        <childnode refid="140531" relation="include">
        </childnode>
        <childnode refid="140530" relation="include">
        </childnode>
      </node>
      <node id="140523">
        <label>set</label>
      </node>
      <node id="140513">
        <label>algorithm</label>
      </node>
      <node id="140510">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
    <innernamespace refid="namespacemoba">moba</innernamespace>
      <sectiondef kind="func">
      <memberdef kind="function" id="_server_session_mgr_8cpp_1ad6485173e031882be2d35c8044b7fa21" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>IMPLEMENT_POOL</definition>
        <argsstring>(moba::SeConnect, 32, 16)</argsstring>
        <name>IMPLEMENT_POOL</name>
        <param>
          <type><ref refid="structmoba_1_1_se_connect" kindref="compound">moba::SeConnect</ref></type>
        </param>
        <param>
          <type>32</type>
        </param>
        <param>
          <type>16</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="F:/TeamWork/ServerVersion/projects/server/Share/ServerBase/ServerSessionMgr.cpp" line="5" column="1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_server_session_mgr_8h" kindref="compound">ServerSessionMgr.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_se_file_log_8h" kindref="compound">SeFileLog.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_se_server_tool_8h" kindref="compound">SeServerTool.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"><ref refid="_server_session_mgr_8cpp_1ad6485173e031882be2d35c8044b7fa21" kindref="member">IMPLEMENT_POOL</ref>(<ref refid="structmoba_1_1_se_connect" kindref="compound">moba::SeConnect</ref>,<sp/>32,<sp/>16);</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7" refid="namespacemoba" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">moba</highlight></codeline>
<codeline lineno="8"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9" refid="classmoba_1_1_server_session_mgr_1a0767a52a7d0c16f5820e42cdb06db19f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a0767a52a7d0c16f5820e42cdb06db19f" kindref="member">ServerSessionMgr::ServerSessionMgr</ref>()</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a926c29203147854a7e90fc4858ad67fb" kindref="member">m_netMgr</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="classmoba_1_1_server_session_mgr_1ad9bc4ed2eeb6aeb3918f7f2649c6e3cb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1ad9bc4ed2eeb6aeb3918f7f2649c6e3cb" kindref="member">ServerSessionMgr::~ServerSessionMgr</ref>()</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18" refid="classmoba_1_1_server_session_mgr_1aa4ad2a436182079b99c65b99f7fd08e9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1aa4ad2a436182079b99c65b99f7fd08e9" kindref="member">ServerSessionMgr::createServer</ref>(<ref refid="structmoba_1_1_se_connect" kindref="compound">SeConnect</ref><sp/>&amp;<sp/>kConnect)</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.insert(std::make_pair(kConnect.<ref refid="structmoba_1_1_se_connect_1a0a240a14e6f8e2f8a5aedb6b1d01b88e" kindref="member">dwServerID</ref>,<sp/>&amp;kConnect));</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24" refid="classmoba_1_1_server_session_mgr_1a4b23d8e9f32948a662167e6d299bee67" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1a4b23d8e9f32948a662167e6d299bee67" kindref="member">ServerSessionMgr::deleteServer</ref>(DWord<sp/>dwServerID)</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::map&lt;DWord,<sp/>SeConnect*&gt;::iterator<sp/>it<sp/>=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.find(dwServerID);</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(it<sp/>==<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.end())</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.erase(it);</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="classmoba_1_1_server_session_mgr_1a39198f291e1e4c7b90da8fd2efbf1581" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1a39198f291e1e4c7b90da8fd2efbf1581" kindref="member">ServerSessionMgr::checkServer</ref>(DWord<sp/>dwServerID)</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.find(dwServerID)<sp/>!=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.end();</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="classmoba_1_1_server_session_mgr_1a218fd5244522e60e2c17652953c5bcd6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1a218fd5244522e60e2c17652953c5bcd6" kindref="member">ServerSessionMgr::getServerHSock</ref>(DWord<sp/>dwServerID,<sp/>HSock<sp/>&amp;<sp/>kSock)</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::map&lt;DWord,<sp/>SeConnect*&gt;::iterator<sp/>it<sp/>=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.find(dwServerID);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(it<sp/>==<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.end())</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kSock<sp/>=<sp/>it-&gt;second-&gt;kSock;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="classmoba_1_1_server_session_mgr_1af6f32915bb35e38b350cde1b355f498b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1a218fd5244522e60e2c17652953c5bcd6" kindref="member">ServerSessionMgr::getServerHSock</ref>(HSock<sp/>&amp;<sp/>kSock)</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.empty())</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kSock<sp/>=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.begin()-&gt;second-&gt;kSock;</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="namespacemoba_1a6f3c6ad4e424858e81ea9de39b8c35bd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacemoba_1a6f3c6ad4e424858e81ea9de39b8c35bd" kindref="member">DELAY_MAX_TIME</ref><sp/>=<sp/>20<sp/>*<sp/>1000;</highlight></codeline>
<codeline lineno="68" refid="classmoba_1_1_server_session_mgr_1ab491aa714527a6eb4399ca1f5766281b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1ab491aa714527a6eb4399ca1f5766281b" kindref="member">ServerSessionMgr::update</ref>()</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespacemoba_1a2ea02b3d6b0984234e33fb9fe56fbdc5" kindref="member">TimeType</ref><sp/>s_preTime<sp/>=<sp/><ref refid="classmoba_1_1_clock_1a029b72699ef2168d7429c114bfa856dd" kindref="member">moba::Clock::getInstance</ref>().<ref refid="classmoba_1_1_clock_1a405b5bd09dad4e81b74ddbd4ed00dc32" kindref="member">getMilliSeconds</ref>();</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iDTime<sp/>=<sp/>(int)(<ref refid="classmoba_1_1_clock_1a029b72699ef2168d7429c114bfa856dd" kindref="member">moba::Clock::getInstance</ref>().<ref refid="classmoba_1_1_clock_1a405b5bd09dad4e81b74ddbd4ed00dc32" kindref="member">getMilliSeconds</ref>()<sp/>-<sp/>s_preTime);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iDTime<sp/>&lt;<sp/>500)</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s_preTime<sp/>=<sp/><ref refid="classmoba_1_1_clock_1a029b72699ef2168d7429c114bfa856dd" kindref="member">moba::Clock::getInstance</ref>().<ref refid="classmoba_1_1_clock_1a405b5bd09dad4e81b74ddbd4ed00dc32" kindref="member">getMilliSeconds</ref>();</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(std::map&lt;DWord,<sp/>SeConnect*&gt;::iterator<sp/>it<sp/>=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.begin();<sp/>it<sp/>!=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.end();<sp/>++it)</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structmoba_1_1_se_connect" kindref="compound">SeConnect</ref><sp/>*<sp/>pkConnect<sp/>=<sp/>it-&gt;second;</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a3e15be5bc74c219a97147729d105f50e" kindref="member">kSock</ref>.IsInvalid())</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iDTime<sp/>=<sp/><ref refid="classmoba_1_1_clock_1a029b72699ef2168d7429c114bfa856dd" kindref="member">moba::Clock::getInstance</ref>().<ref refid="classmoba_1_1_clock_1a405b5bd09dad4e81b74ddbd4ed00dc32" kindref="member">getMilliSeconds</ref>()<sp/>-<sp/>pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1ab7ea8bc1b7b3ed9f989870d3449dbb4b" kindref="member">recvTime</ref>;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iDTime<sp/>&gt;=<sp/><ref refid="namespacemoba_1a6f3c6ad4e424858e81ea9de39b8c35bd" kindref="member">DELAY_MAX_TIME</ref>)</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a59fe2018c00666084724bec1365b41f5" kindref="member">SeLogError</ref>(</highlight><highlight class="stringliteral">&quot;LastRecvTime<sp/>OverTime<sp/>Disconnect<sp/>[%s][%s]<sp/>addr[%s:%d]&quot;</highlight><highlight class="normal">,<sp/><ref refid="_se_server_tool_8cpp_1a4d452970e4bf219a5058ab2ad8b0e2c4" kindref="member">GetServerNameByIndex</ref>(pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a60eda066d66070e0336564c0dba4e08f" kindref="member">eIndex</ref>),<ref refid="_se_tool_8h_1ada81d4ae5d39c42af0a02b45f4a6f715" kindref="member">GetID2Str</ref>(pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a0a240a14e6f8e2f8a5aedb6b1d01b88e" kindref="member">dwServerID</ref>),<sp/>pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a4f9b9fe60b4a7d0742d28f9584f07425" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a4f9b9fe60b4a7d0742d28f9584f07425" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a926c29203147854a7e90fc4858ad67fb" kindref="member">m_netMgr</ref>-&gt;Disconnect(pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a3e15be5bc74c219a97147729d105f50e" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="classmoba_1_1_server_session_mgr_1afe74b10561a74ea894525811da93d6dd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1afe74b10561a74ea894525811da93d6dd" kindref="member">ServerSessionMgr::initialize</ref>(TeNetMgr<sp/>&amp;<sp/>netMgr)</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a926c29203147854a7e90fc4858ad67fb" kindref="member">m_netMgr</ref><sp/>=<sp/>&amp;netMgr;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="classmoba_1_1_server_session_mgr_1abe916376c07bef0b75157aaa7f5764aa" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmoba_1_1_server_session_mgr_1abe916376c07bef0b75157aaa7f5764aa" kindref="member">ServerSessionMgr::broadcast</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Es::AutoLock<sp/>guard(&amp;<ref refid="classmoba_1_1_server_session_mgr_1a9662655d80ce58f10fe588739c0f1e44" kindref="member">m_mutex</ref>);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(std::map&lt;DWord,<sp/>SeConnect*&gt;::iterator<sp/>it<sp/>=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.begin();<sp/>it<sp/>!=<sp/><ref refid="classmoba_1_1_server_session_mgr_1a84cc4f23a21b2bb2fb1aee428210a052" kindref="member">m_servers</ref>.end();<sp/>++it)</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structmoba_1_1_se_connect" kindref="compound">SeConnect</ref><sp/>*<sp/>pkConnect<sp/>=<sp/>it-&gt;second;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmoba_1_1_server_session_mgr_1a926c29203147854a7e90fc4858ad67fb" kindref="member">m_netMgr</ref>-&gt;SendData(pkConnect-&gt;<ref refid="structmoba_1_1_se_connect_1a3e15be5bc74c219a97147729d105f50e" kindref="member">kSock</ref>,<sp/>pkData,<sp/>iSize);</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="110"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="F:/TeamWork/ServerVersion/projects/server/Share/ServerBase/ServerSessionMgr.cpp"/>
  </compounddef>
</doxygen>
