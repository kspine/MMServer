<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="_src_2_se_w_g_process_8cpp" kind="file">
    <compoundname>SeWGProcess.cpp</compoundname>
    <includes refid="_src_2_global_server_8h" local="yes">GlobalServer.h</includes>
    <includes refid="_se_w_g_process_8inc" local="yes">SeWGProcess.inc</includes>
    <incdepgraph>
      <node id="28839">
        <label>list</label>
      </node>
      <node id="28833">
        <label>locale</label>
      </node>
      <node id="28868">
        <label>SePtl_GS_To_LS.h</label>
        <link refid="_se_ptl___g_s___to___l_s_8h"/>
        <childnode refid="28864" relation="include">
        </childnode>
      </node>
      <node id="28882">
        <label>SeWGProcess.inc</label>
        <link refid="_se_w_g_process_8inc"/>
      </node>
      <node id="28878">
        <label>SeWGProcess.inl</label>
        <link refid="_se_w_g_process_8inl"/>
      </node>
      <node id="28843">
        <label>queue</label>
      </node>
      <node id="28837">
        <label>limits</label>
      </node>
      <node id="28866">
        <label>SePtlCommDefine.h</label>
        <link refid="_se_ptl_comm_define_8h"/>
      </node>
      <node id="28853">
        <label>SeMemPool.h</label>
        <link refid="_se_mem_pool_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
        <childnode refid="28848" relation="include">
        </childnode>
        <childnode refid="28825" relation="include">
        </childnode>
      </node>
      <node id="28820">
        <label>windows.h</label>
      </node>
      <node id="28825">
        <label>assert.h</label>
      </node>
      <node id="28869">
        <label>SePtl_LS_To_GS.h</label>
        <link refid="_se_ptl___l_s___to___g_s_8h"/>
        <childnode refid="28864" relation="include">
        </childnode>
      </node>
      <node id="28872">
        <label>SeTimer.h</label>
        <link refid="_se_timer_8h"/>
      </node>
      <node id="28879">
        <label>SeLGProcess.inl</label>
        <link refid="_se_l_g_process_8inl"/>
      </node>
      <node id="28823">
        <label>stdlib.h</label>
      </node>
      <node id="28848">
        <label>EsLock.h</label>
      </node>
      <node id="28827">
        <label>cmath</label>
      </node>
      <node id="28867">
        <label>SePtl_GS_To_WS.h</label>
        <link refid="_se_ptl___g_s___to___w_s_8h"/>
        <childnode refid="28864" relation="include">
        </childnode>
      </node>
      <node id="28863">
        <label>SePtl_WS_To_GS.h</label>
        <link refid="_se_ptl___w_s___to___g_s_8h"/>
        <childnode refid="28864" relation="include">
        </childnode>
      </node>
      <node id="28836">
        <label>string</label>
      </node>
      <node id="28870">
        <label>SePtl_HS_To_HS.h</label>
        <link refid="_se_ptl___h_s___to___h_s_8h"/>
        <childnode refid="28864" relation="include">
        </childnode>
      </node>
      <node id="28840">
        <label>map</label>
      </node>
      <node id="28846">
        <label>SeFileLog.h</label>
        <link refid="_se_file_log_8h"/>
        <childnode refid="28847" relation="include">
        </childnode>
        <childnode refid="28829" relation="include">
        </childnode>
        <childnode refid="28848" relation="include">
        </childnode>
      </node>
      <node id="28822">
        <label>conio.h</label>
      </node>
      <node id="28865">
        <label>SePtlRandomNumDef.h</label>
        <link refid="_se_ptl_random_num_def_8h"/>
      </node>
      <node id="28876">
        <label>SeHttpSend.inl</label>
        <link refid="_global_server_2_src_2_se_http_send_8inl"/>
      </node>
      <node id="28815">
        <label>GlobalServer/Src/SeWGProcess.cpp</label>
        <link refid="Src/SeWGProcess.cpp"/>
        <childnode refid="28816" relation="include">
        </childnode>
        <childnode refid="28882" relation="include">
        </childnode>
      </node>
      <node id="28821">
        <label>direct.h</label>
      </node>
      <node id="28834">
        <label>fstream</label>
      </node>
      <node id="28859">
        <label>SeTool.h</label>
        <link refid="_se_tool_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
        <childnode refid="28852" relation="include">
        </childnode>
        <childnode refid="28860" relation="include">
        </childnode>
        <childnode refid="28861" relation="include">
        </childnode>
        <childnode refid="28831" relation="include">
        </childnode>
        <childnode refid="28862" relation="include">
        </childnode>
      </node>
      <node id="28819">
        <label>winsock2.h</label>
      </node>
      <node id="28856">
        <label>TeDataBaseMgr.h</label>
      </node>
      <node id="28817">
        <label>SeServerMainDef.h</label>
        <link refid="_se_server_main_def_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
      </node>
      <node id="28861">
        <label>TeMisc.h</label>
        <link refid="_te_misc_8h"/>
        <childnode refid="28830" relation="include">
        </childnode>
      </node>
      <node id="28849">
        <label>SeCacheMgr.h</label>
        <link refid="_src_2_se_cache_mgr_8h"/>
        <childnode refid="28850" relation="include">
        </childnode>
      </node>
      <node id="28858">
        <label>SeServerDefine.h</label>
        <link refid="_se_server_define_8h"/>
        <childnode refid="28852" relation="include">
        </childnode>
        <childnode refid="28854" relation="include">
        </childnode>
        <childnode refid="28859" relation="include">
        </childnode>
      </node>
      <node id="28830">
        <label>string.h</label>
      </node>
      <node id="28857">
        <label>SeConfig.h</label>
        <link refid="_se_config_8h"/>
        <childnode refid="28852" relation="include">
        </childnode>
      </node>
      <node id="28828">
        <label>ctime</label>
      </node>
      <node id="28854">
        <label>TeNetMgr.h</label>
      </node>
      <node id="28838">
        <label>vector</label>
      </node>
      <node id="28851">
        <label>GlobalServerDef.h</label>
        <link refid="_src_2_global_server_def_8h"/>
        <childnode refid="28852" relation="include">
        </childnode>
        <childnode refid="28853" relation="include">
        </childnode>
        <childnode refid="28854" relation="include">
        </childnode>
        <childnode refid="28855" relation="include">
        </childnode>
        <childnode refid="28856" relation="include">
        </childnode>
        <childnode refid="28857" relation="include">
        </childnode>
        <childnode refid="28858" relation="include">
        </childnode>
        <childnode refid="28863" relation="include">
        </childnode>
        <childnode refid="28867" relation="include">
        </childnode>
        <childnode refid="28868" relation="include">
        </childnode>
        <childnode refid="28869" relation="include">
        </childnode>
        <childnode refid="28870" relation="include">
        </childnode>
      </node>
      <node id="28844">
        <label>new</label>
      </node>
      <node id="28816">
        <label>GlobalServer.h</label>
        <link refid="_src_2_global_server_8h"/>
        <childnode refid="28817" relation="include">
        </childnode>
        <childnode refid="28846" relation="include">
        </childnode>
        <childnode refid="28849" relation="include">
        </childnode>
        <childnode refid="28871" relation="include">
        </childnode>
        <childnode refid="28873" relation="include">
        </childnode>
        <childnode refid="28851" relation="include">
        </childnode>
        <childnode refid="28874" relation="include">
        </childnode>
        <childnode refid="28875" relation="include">
        </childnode>
        <childnode refid="28876" relation="include">
        </childnode>
        <childnode refid="28877" relation="include">
        </childnode>
        <childnode refid="28878" relation="include">
        </childnode>
        <childnode refid="28879" relation="include">
        </childnode>
        <childnode refid="28880" relation="include">
        </childnode>
        <childnode refid="28881" relation="include">
        </childnode>
      </node>
      <node id="28864">
        <label>SePtlDefine.h</label>
        <link refid="_se_ptl_define_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
        <childnode refid="28852" relation="include">
        </childnode>
        <childnode refid="28859" relation="include">
        </childnode>
        <childnode refid="28865" relation="include">
        </childnode>
        <childnode refid="28866" relation="include">
        </childnode>
        <childnode refid="28853" relation="include">
        </childnode>
      </node>
      <node id="28852">
        <label>SeShareDef.h</label>
        <link refid="_se_share_def_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
      </node>
      <node id="28835">
        <label>sstream</label>
      </node>
      <node id="28862">
        <label>EsString.h</label>
      </node>
      <node id="28871">
        <label>SeVirtConnMgr.h</label>
        <link refid="_se_virt_conn_mgr_8h"/>
        <childnode refid="28852" relation="include">
        </childnode>
        <childnode refid="28854" relation="include">
        </childnode>
        <childnode refid="28864" relation="include">
        </childnode>
        <childnode refid="28872" relation="include">
        </childnode>
      </node>
      <node id="28875">
        <label>SeGLSend.inl</label>
        <link refid="_se_g_l_send_8inl"/>
      </node>
      <node id="28881">
        <label>SeDBProcess.inl</label>
        <link refid="_global_server_2_src_2_se_d_b_process_8inl"/>
      </node>
      <node id="28818">
        <label>SeInclude.h</label>
        <link refid="_se_include_8h"/>
        <childnode refid="28819" relation="include">
        </childnode>
        <childnode refid="28820" relation="include">
        </childnode>
        <childnode refid="28821" relation="include">
        </childnode>
        <childnode refid="28822" relation="include">
        </childnode>
        <childnode refid="28823" relation="include">
        </childnode>
        <childnode refid="28824" relation="include">
        </childnode>
        <childnode refid="28825" relation="include">
        </childnode>
        <childnode refid="28826" relation="include">
        </childnode>
        <childnode refid="28827" relation="include">
        </childnode>
        <childnode refid="28828" relation="include">
        </childnode>
        <childnode refid="28829" relation="include">
        </childnode>
        <childnode refid="28830" relation="include">
        </childnode>
        <childnode refid="28831" relation="include">
        </childnode>
        <childnode refid="28832" relation="include">
        </childnode>
        <childnode refid="28833" relation="include">
        </childnode>
        <childnode refid="28834" relation="include">
        </childnode>
        <childnode refid="28835" relation="include">
        </childnode>
        <childnode refid="28836" relation="include">
        </childnode>
        <childnode refid="28837" relation="include">
        </childnode>
        <childnode refid="28838" relation="include">
        </childnode>
        <childnode refid="28839" relation="include">
        </childnode>
        <childnode refid="28840" relation="include">
        </childnode>
        <childnode refid="28841" relation="include">
        </childnode>
        <childnode refid="28842" relation="include">
        </childnode>
        <childnode refid="28843" relation="include">
        </childnode>
        <childnode refid="28844" relation="include">
        </childnode>
        <childnode refid="28845" relation="include">
        </childnode>
      </node>
      <node id="28847">
        <label>time.h</label>
      </node>
      <node id="28824">
        <label>math.h</label>
      </node>
      <node id="28855">
        <label>SeSynMgr.h</label>
        <link refid="_se_syn_mgr_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
      </node>
      <node id="28831">
        <label>EsType.h</label>
      </node>
      <node id="28826">
        <label>cctype</label>
      </node>
      <node id="28860">
        <label>SeToolTemplate.inl</label>
        <link refid="_se_tool_template_8inl"/>
      </node>
      <node id="28874">
        <label>SeGWSend.inl</label>
        <link refid="_se_g_w_send_8inl"/>
      </node>
      <node id="28877">
        <label>SeDBSend.inl</label>
        <link refid="_global_server_2_src_2_se_d_b_send_8inl"/>
      </node>
      <node id="28841">
        <label>unordered_map</label>
      </node>
      <node id="28845">
        <label>SeDefine.h</label>
        <link refid="_se_define_8h"/>
      </node>
      <node id="28873">
        <label>SeServerTool.h</label>
        <link refid="_se_server_tool_8h"/>
        <childnode refid="28818" relation="include">
        </childnode>
        <childnode refid="28859" relation="include">
        </childnode>
        <childnode refid="28864" relation="include">
        </childnode>
      </node>
      <node id="28850">
        <label>SeCacheMgrDef.h</label>
        <link refid="_src_2_se_cache_mgr_def_8h"/>
        <childnode refid="28851" relation="include">
        </childnode>
      </node>
      <node id="28880">
        <label>SeHttpProcess.inl</label>
        <link refid="_global_server_2_src_2_se_http_process_8inl"/>
      </node>
      <node id="28842">
        <label>set</label>
      </node>
      <node id="28832">
        <label>algorithm</label>
      </node>
      <node id="28829">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="_src_2_se_w_g_process_8cpp_1a24cd3c37a165a8c4626d9e78df4574ff" prot="public" static="no">
        <name>SERVER</name>
        <initializer><ref refid="class_global_server" kindref="compound">GlobalServer</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="F:/TeamWork/ServerVersion/projects/server/Server/Server/GlobalServer/Src/SeWGProcess.cpp" line="3" column="9" bodyfile="F:/TeamWork/ServerVersion/projects/server/Server/Server/GlobalServer/Src/SeWGProcess.cpp" bodystart="3" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_src_2_global_server_8h" kindref="compound">GlobalServer.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3" refid="_src_2_se_w_g_process_8cpp_1a24cd3c37a165a8c4626d9e78df4574ff" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVER<sp/>GlobalServer</highlight></codeline>
<codeline lineno="4"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_se_w_g_process_8inc" kindref="compound">SeWGProcess.inc</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>SERVER</highlight></codeline>
<codeline lineno="6"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_global_server_1a314368ab5b495f6b0fbde75b2eea7c83" kindref="member">GlobalServer::PreProcessWG</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkSender)</highlight></codeline>
<codeline lineno="8"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkWS<sp/>=<sp/>(<ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*)pkSender;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pkWS)</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_c_m_d" kindref="compound">SeCMD</ref>*<sp/>pkCmd<sp/>=<sp/>(<ref refid="struct_se_c_m_d" kindref="compound">SeCMD</ref>*)pkData;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pkCmd)</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkWS-&gt;<ref refid="struct_se_w_s_data_1ab8d44ccc33163e1fc1aa2b425ad34e53" kindref="member">eState</ref><sp/>==<sp/><ref refid="src_2_global_server_def_8h_1a2ea29fb43c02c342774401daa3815e3ba2be7ebbb223eb3708489104b70e60b1a" kindref="member">WSS_UNKOWN</ref><sp/>&amp;&amp;<sp/>pkCmd-&gt;<ref refid="struct_se_c_m_d_1a2efa122a60040d09cfca777f9155394c" kindref="member">wCmd</ref><sp/>!=<sp/><ref refid="_se_ptl___w_s___to___g_s_8h_1a70ddbf2bc8bb46ddb9a35e3a82a8c9d5a3ed2567560bd2c15a562969a626ce7b5" kindref="member">CMD_WG_REGISTER</ref>)</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="28"><highlight class="normal">}</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_global_server_1a88ec2f5d8d8b3f9edde856ea832dd7f1" kindref="member">GlobalServer::ProcessWG_Register</ref>(<ref refid="struct_se_w_g___register" kindref="compound">SeWG_Register</ref>*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkSender)</highlight></codeline>
<codeline lineno="31"><highlight class="normal">{</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkWS<sp/>=<sp/>(<ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*)pkSender;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkWS-&gt;<ref refid="struct_se_w_s_data_1ab8d44ccc33163e1fc1aa2b425ad34e53" kindref="member">eState</ref><sp/>!=<sp/><ref refid="src_2_global_server_def_8h_1a2ea29fb43c02c342774401daa3815e3ba2be7ebbb223eb3708489104b70e60b1a" kindref="member">WSS_UNKOWN</ref>)</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkData-&gt;<ref refid="struct_se_w_g___register_1aee55157f914c7827c6de2b8cf7b0c59e" kindref="member">dwLoginMagic</ref><sp/>!=<sp/><ref refid="_se_ptl_comm_define_8h_1af62c3a00672953c86a2586d53c60663aa051b38374860159471f6a78f1167a7eb" kindref="member">SSD_MSANGO_MAGIC</ref><sp/>||<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref><sp/>==<sp/>0<sp/>||<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref><sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>防止重复注册</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkFindWS<sp/>=<sp/><ref refid="class_global_server_1a0df1684f3285e319ebd96712a47feb42" kindref="member">GetWSByID</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkFindWS)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a59fe2018c00666084724bec1365b41f5" kindref="member">SeLogError</ref>(</highlight><highlight class="stringliteral">&quot;WS<sp/>has<sp/>been<sp/>registered:[%s:%d]<sp/>id[%s]&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>,<sp/><ref refid="_se_tool_8h_1ada81d4ae5d39c42af0a02b45f4a6f715" kindref="member">GetID2Str</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>));</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iDTime<sp/>=<sp/>(int)(<ref refid="class_global_server_1adc2f8b46002eac2c3f52e076a3a107c2" kindref="member">m_dwCurTime</ref><sp/>-<sp/>pkFindWS-&gt;<ref refid="struct_se_w_s_data_1a86148f9d13629aed1e8914be75d21637" kindref="member">dwRecvTime</ref>);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iDTime<sp/>&gt;=<sp/>5000)</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkFindWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>防止重复注册<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>pkFindWS<sp/>=<sp/><ref refid="class_global_server_1ad77611c842810b2e30cafc67166df59d" kindref="member">GetWSByAreaID</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref>);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkFindWS)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a59fe2018c00666084724bec1365b41f5" kindref="member">SeLogError</ref>(</highlight><highlight class="stringliteral">&quot;WS<sp/>has<sp/>been<sp/>registered:[%s:%d]<sp/>areaid[%u]&quot;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>,<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref>);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>防止没响应的连接一直不断开</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iDTime<sp/>=<sp/>(int)(<ref refid="class_global_server_1adc2f8b46002eac2c3f52e076a3a107c2" kindref="member">m_dwCurTime</ref><sp/>-<sp/>pkFindWS-&gt;<ref refid="struct_se_w_s_data_1a86148f9d13629aed1e8914be75d21637" kindref="member">dwRecvTime</ref>);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iDTime<sp/>&gt;=<sp/>5000)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkFindWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1ab8d44ccc33163e1fc1aa2b425ad34e53" kindref="member">eState</ref><sp/>=<sp/><ref refid="src_2_global_server_def_8h_1a2ea29fb43c02c342774401daa3815e3ba302e598532950ed6a543c508b7514705" kindref="member">WSS_LOGIN_OK</ref>;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1af325940f9ea9a1f5b4e1c05478a4f43c" kindref="member">dwServerID</ref><sp/>=<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1abac3ec5bcdbbe4c6518693c41f959f09" kindref="member">dwAreaID</ref><sp/>=<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref>;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a83f3fe470b91cb8eed8762cc8e5e26c3" kindref="member">SeLogInfo</ref>(</highlight><highlight class="stringliteral">&quot;WS<sp/>register<sp/>successfully:[%s:%d]<sp/>id[%s]&quot;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>,<sp/><ref refid="_se_tool_8h_1ada81d4ae5d39c42af0a02b45f4a6f715" kindref="member">GetID2Str</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>));</highlight></codeline>
<codeline lineno="81"><highlight class="normal">}</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_global_server_1abc293b6f7847b2df4e7625dd482ad23b" kindref="member">GlobalServer::ProcessWG_HeartPackage</ref>(<ref refid="struct_se_w_g___heart_package" kindref="compound">SeWG_HeartPackage</ref>*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkSender)</highlight></codeline>
<codeline lineno="84"><highlight class="normal">{</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkWS<sp/>=<sp/>(<ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*)pkSender;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_global_server_1a2976e9b9c31967780855cf77f017a552" kindref="member">SendGW_HeartPackageRet</ref>(&amp;pkWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="88"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="F:/TeamWork/ServerVersion/projects/server/Server/Server/GlobalServer/Src/SeWGProcess.cpp"/>
  </compounddef>
</doxygen>
