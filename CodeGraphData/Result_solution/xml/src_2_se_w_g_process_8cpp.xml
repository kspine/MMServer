<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="src_2_se_w_g_process_8cpp" kind="file">
    <compoundname>SeWGProcess.cpp</compoundname>
    <includes refid="src_2_global_server_8h" local="yes">GlobalServer.h</includes>
    <includes refid="_se_w_g_process_8inc" local="yes">SeWGProcess.inc</includes>
    <incdepgraph>
      <node id="28770">
        <label>list</label>
      </node>
      <node id="28764">
        <label>locale</label>
      </node>
      <node id="28799">
        <label>SePtl_GS_To_LS.h</label>
        <link refid="_se_ptl___g_s___to___l_s_8h"/>
        <childnode refid="28795" relation="include">
        </childnode>
      </node>
      <node id="28813">
        <label>SeWGProcess.inc</label>
        <link refid="_se_w_g_process_8inc"/>
      </node>
      <node id="28809">
        <label>SeWGProcess.inl</label>
        <link refid="_se_w_g_process_8inl"/>
      </node>
      <node id="28774">
        <label>queue</label>
      </node>
      <node id="28768">
        <label>limits</label>
      </node>
      <node id="28797">
        <label>SePtlCommDefine.h</label>
        <link refid="_se_ptl_comm_define_8h"/>
      </node>
      <node id="28784">
        <label>SeMemPool.h</label>
        <link refid="_se_mem_pool_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
        <childnode refid="28779" relation="include">
        </childnode>
        <childnode refid="28756" relation="include">
        </childnode>
      </node>
      <node id="28751">
        <label>windows.h</label>
      </node>
      <node id="28756">
        <label>assert.h</label>
      </node>
      <node id="28800">
        <label>SePtl_LS_To_GS.h</label>
        <link refid="_se_ptl___l_s___to___g_s_8h"/>
        <childnode refid="28795" relation="include">
        </childnode>
      </node>
      <node id="28803">
        <label>SeTimer.h</label>
        <link refid="_se_timer_8h"/>
      </node>
      <node id="28810">
        <label>SeLGProcess.inl</label>
        <link refid="_se_l_g_process_8inl"/>
      </node>
      <node id="28754">
        <label>stdlib.h</label>
      </node>
      <node id="28779">
        <label>EsLock.h</label>
      </node>
      <node id="28747">
        <label>GlobalServer.h</label>
        <link refid="src_2_global_server_8h"/>
        <childnode refid="28748" relation="include">
        </childnode>
        <childnode refid="28777" relation="include">
        </childnode>
        <childnode refid="28780" relation="include">
        </childnode>
        <childnode refid="28802" relation="include">
        </childnode>
        <childnode refid="28804" relation="include">
        </childnode>
        <childnode refid="28782" relation="include">
        </childnode>
        <childnode refid="28805" relation="include">
        </childnode>
        <childnode refid="28806" relation="include">
        </childnode>
        <childnode refid="28807" relation="include">
        </childnode>
        <childnode refid="28808" relation="include">
        </childnode>
        <childnode refid="28809" relation="include">
        </childnode>
        <childnode refid="28810" relation="include">
        </childnode>
        <childnode refid="28811" relation="include">
        </childnode>
        <childnode refid="28812" relation="include">
        </childnode>
      </node>
      <node id="28758">
        <label>cmath</label>
      </node>
      <node id="28798">
        <label>SePtl_GS_To_WS.h</label>
        <link refid="_se_ptl___g_s___to___w_s_8h"/>
        <childnode refid="28795" relation="include">
        </childnode>
      </node>
      <node id="28794">
        <label>SePtl_WS_To_GS.h</label>
        <link refid="_se_ptl___w_s___to___g_s_8h"/>
        <childnode refid="28795" relation="include">
        </childnode>
      </node>
      <node id="28767">
        <label>string</label>
      </node>
      <node id="28801">
        <label>SePtl_HS_To_HS.h</label>
        <link refid="_se_ptl___h_s___to___h_s_8h"/>
        <childnode refid="28795" relation="include">
        </childnode>
      </node>
      <node id="28771">
        <label>map</label>
      </node>
      <node id="28777">
        <label>SeFileLog.h</label>
        <link refid="_se_file_log_8h"/>
        <childnode refid="28778" relation="include">
        </childnode>
        <childnode refid="28760" relation="include">
        </childnode>
        <childnode refid="28779" relation="include">
        </childnode>
      </node>
      <node id="28746">
        <label>GlobalServer/src/SeWGProcess.cpp</label>
        <link refid="src/SeWGProcess.cpp"/>
        <childnode refid="28747" relation="include">
        </childnode>
        <childnode refid="28813" relation="include">
        </childnode>
      </node>
      <node id="28753">
        <label>conio.h</label>
      </node>
      <node id="28796">
        <label>SePtlRandomNumDef.h</label>
        <link refid="_se_ptl_random_num_def_8h"/>
      </node>
      <node id="28752">
        <label>direct.h</label>
      </node>
      <node id="28780">
        <label>SeCacheMgr.h</label>
        <link refid="src_2_se_cache_mgr_8h"/>
        <childnode refid="28781" relation="include">
        </childnode>
      </node>
      <node id="28765">
        <label>fstream</label>
      </node>
      <node id="28790">
        <label>SeTool.h</label>
        <link refid="_se_tool_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
        <childnode refid="28783" relation="include">
        </childnode>
        <childnode refid="28791" relation="include">
        </childnode>
        <childnode refid="28792" relation="include">
        </childnode>
        <childnode refid="28762" relation="include">
        </childnode>
        <childnode refid="28793" relation="include">
        </childnode>
      </node>
      <node id="28750">
        <label>winsock2.h</label>
      </node>
      <node id="28787">
        <label>TeDataBaseMgr.h</label>
      </node>
      <node id="28748">
        <label>SeServerMainDef.h</label>
        <link refid="_se_server_main_def_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
      </node>
      <node id="28792">
        <label>TeMisc.h</label>
        <link refid="_te_misc_8h"/>
        <childnode refid="28761" relation="include">
        </childnode>
      </node>
      <node id="28782">
        <label>GlobalServerDef.h</label>
        <link refid="src_2_global_server_def_8h"/>
        <childnode refid="28783" relation="include">
        </childnode>
        <childnode refid="28784" relation="include">
        </childnode>
        <childnode refid="28785" relation="include">
        </childnode>
        <childnode refid="28786" relation="include">
        </childnode>
        <childnode refid="28787" relation="include">
        </childnode>
        <childnode refid="28788" relation="include">
        </childnode>
        <childnode refid="28789" relation="include">
        </childnode>
        <childnode refid="28794" relation="include">
        </childnode>
        <childnode refid="28798" relation="include">
        </childnode>
        <childnode refid="28799" relation="include">
        </childnode>
        <childnode refid="28800" relation="include">
        </childnode>
        <childnode refid="28801" relation="include">
        </childnode>
      </node>
      <node id="28807">
        <label>SeHttpSend.inl</label>
        <link refid="_global_server_2src_2_se_http_send_8inl"/>
      </node>
      <node id="28789">
        <label>SeServerDefine.h</label>
        <link refid="_se_server_define_8h"/>
        <childnode refid="28783" relation="include">
        </childnode>
        <childnode refid="28785" relation="include">
        </childnode>
        <childnode refid="28790" relation="include">
        </childnode>
      </node>
      <node id="28761">
        <label>string.h</label>
      </node>
      <node id="28788">
        <label>SeConfig.h</label>
        <link refid="_se_config_8h"/>
        <childnode refid="28783" relation="include">
        </childnode>
      </node>
      <node id="28759">
        <label>ctime</label>
      </node>
      <node id="28785">
        <label>TeNetMgr.h</label>
      </node>
      <node id="28769">
        <label>vector</label>
      </node>
      <node id="28775">
        <label>new</label>
      </node>
      <node id="28795">
        <label>SePtlDefine.h</label>
        <link refid="_se_ptl_define_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
        <childnode refid="28783" relation="include">
        </childnode>
        <childnode refid="28790" relation="include">
        </childnode>
        <childnode refid="28796" relation="include">
        </childnode>
        <childnode refid="28797" relation="include">
        </childnode>
        <childnode refid="28784" relation="include">
        </childnode>
      </node>
      <node id="28783">
        <label>SeShareDef.h</label>
        <link refid="_se_share_def_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
      </node>
      <node id="28766">
        <label>sstream</label>
      </node>
      <node id="28793">
        <label>EsString.h</label>
      </node>
      <node id="28812">
        <label>SeDBProcess.inl</label>
        <link refid="_global_server_2src_2_se_d_b_process_8inl"/>
      </node>
      <node id="28802">
        <label>SeVirtConnMgr.h</label>
        <link refid="_se_virt_conn_mgr_8h"/>
        <childnode refid="28783" relation="include">
        </childnode>
        <childnode refid="28785" relation="include">
        </childnode>
        <childnode refid="28795" relation="include">
        </childnode>
        <childnode refid="28803" relation="include">
        </childnode>
      </node>
      <node id="28808">
        <label>SeDBSend.inl</label>
        <link refid="_global_server_2src_2_se_d_b_send_8inl"/>
      </node>
      <node id="28806">
        <label>SeGLSend.inl</label>
        <link refid="_se_g_l_send_8inl"/>
      </node>
      <node id="28749">
        <label>SeInclude.h</label>
        <link refid="_se_include_8h"/>
        <childnode refid="28750" relation="include">
        </childnode>
        <childnode refid="28751" relation="include">
        </childnode>
        <childnode refid="28752" relation="include">
        </childnode>
        <childnode refid="28753" relation="include">
        </childnode>
        <childnode refid="28754" relation="include">
        </childnode>
        <childnode refid="28755" relation="include">
        </childnode>
        <childnode refid="28756" relation="include">
        </childnode>
        <childnode refid="28757" relation="include">
        </childnode>
        <childnode refid="28758" relation="include">
        </childnode>
        <childnode refid="28759" relation="include">
        </childnode>
        <childnode refid="28760" relation="include">
        </childnode>
        <childnode refid="28761" relation="include">
        </childnode>
        <childnode refid="28762" relation="include">
        </childnode>
        <childnode refid="28763" relation="include">
        </childnode>
        <childnode refid="28764" relation="include">
        </childnode>
        <childnode refid="28765" relation="include">
        </childnode>
        <childnode refid="28766" relation="include">
        </childnode>
        <childnode refid="28767" relation="include">
        </childnode>
        <childnode refid="28768" relation="include">
        </childnode>
        <childnode refid="28769" relation="include">
        </childnode>
        <childnode refid="28770" relation="include">
        </childnode>
        <childnode refid="28771" relation="include">
        </childnode>
        <childnode refid="28772" relation="include">
        </childnode>
        <childnode refid="28773" relation="include">
        </childnode>
        <childnode refid="28774" relation="include">
        </childnode>
        <childnode refid="28775" relation="include">
        </childnode>
        <childnode refid="28776" relation="include">
        </childnode>
      </node>
      <node id="28778">
        <label>time.h</label>
      </node>
      <node id="28755">
        <label>math.h</label>
      </node>
      <node id="28786">
        <label>SeSynMgr.h</label>
        <link refid="_se_syn_mgr_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
      </node>
      <node id="28762">
        <label>EsType.h</label>
      </node>
      <node id="28757">
        <label>cctype</label>
      </node>
      <node id="28811">
        <label>SeHttpProcess.inl</label>
        <link refid="_global_server_2src_2_se_http_process_8inl"/>
      </node>
      <node id="28791">
        <label>SeToolTemplate.inl</label>
        <link refid="_se_tool_template_8inl"/>
      </node>
      <node id="28805">
        <label>SeGWSend.inl</label>
        <link refid="_se_g_w_send_8inl"/>
      </node>
      <node id="28772">
        <label>unordered_map</label>
      </node>
      <node id="28776">
        <label>SeDefine.h</label>
        <link refid="_se_define_8h"/>
      </node>
      <node id="28804">
        <label>SeServerTool.h</label>
        <link refid="_se_server_tool_8h"/>
        <childnode refid="28749" relation="include">
        </childnode>
        <childnode refid="28790" relation="include">
        </childnode>
        <childnode refid="28795" relation="include">
        </childnode>
      </node>
      <node id="28781">
        <label>SeCacheMgrDef.h</label>
        <link refid="src_2_se_cache_mgr_def_8h"/>
        <childnode refid="28782" relation="include">
        </childnode>
      </node>
      <node id="28773">
        <label>set</label>
      </node>
      <node id="28763">
        <label>algorithm</label>
      </node>
      <node id="28760">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="src_2_se_w_g_process_8cpp_1a24cd3c37a165a8c4626d9e78df4574ff" prot="public" static="no">
        <name>SERVER</name>
        <initializer><ref refid="class_global_server" kindref="compound">GlobalServer</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="F:/TeamWork/ServerVersion/projects/server/Server/Server/GlobalServer/src/SeWGProcess.cpp" line="3" column="9" bodyfile="F:/TeamWork/ServerVersion/projects/server/Server/Server/GlobalServer/src/SeWGProcess.cpp" bodystart="3" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="src_2_global_server_8h" kindref="compound">GlobalServer.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3" refid="src_2_se_w_g_process_8cpp_1a24cd3c37a165a8c4626d9e78df4574ff" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVER<sp/>GlobalServer</highlight></codeline>
<codeline lineno="4"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_se_w_g_process_8inc" kindref="compound">SeWGProcess.inc</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>SERVER</highlight></codeline>
<codeline lineno="6"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7" refid="class_global_server_1a314368ab5b495f6b0fbde75b2eea7c83" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_global_server_1a314368ab5b495f6b0fbde75b2eea7c83" kindref="member">GlobalServer::PreProcessWG</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkSender)</highlight></codeline>
<codeline lineno="8"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkWS<sp/>=<sp/>(<ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*)pkSender;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pkWS)</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_c_m_d" kindref="compound">SeCMD</ref>*<sp/>pkCmd<sp/>=<sp/>(<ref refid="struct_se_c_m_d" kindref="compound">SeCMD</ref>*)pkData;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pkCmd)</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkWS-&gt;<ref refid="struct_se_w_s_data_1ab8d44ccc33163e1fc1aa2b425ad34e53" kindref="member">eState</ref><sp/>==<sp/><ref refid="src_2_global_server_def_8h_1a2ea29fb43c02c342774401daa3815e3ba2be7ebbb223eb3708489104b70e60b1a" kindref="member">WSS_UNKOWN</ref><sp/>&amp;&amp;<sp/>pkCmd-&gt;<ref refid="struct_se_c_m_d_1a2efa122a60040d09cfca777f9155394c" kindref="member">wCmd</ref><sp/>!=<sp/><ref refid="_se_ptl___w_s___to___g_s_8h_1a70ddbf2bc8bb46ddb9a35e3a82a8c9d5a3ed2567560bd2c15a562969a626ce7b5" kindref="member">CMD_WG_REGISTER</ref>)</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="28"><highlight class="normal">}</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="class_global_server_1a88ec2f5d8d8b3f9edde856ea832dd7f1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_global_server_1a88ec2f5d8d8b3f9edde856ea832dd7f1" kindref="member">GlobalServer::ProcessWG_Register</ref>(<ref refid="struct_se_w_g___register" kindref="compound">SeWG_Register</ref>*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkSender)</highlight></codeline>
<codeline lineno="31"><highlight class="normal">{</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkWS<sp/>=<sp/>(<ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*)pkSender;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkWS-&gt;<ref refid="struct_se_w_s_data_1ab8d44ccc33163e1fc1aa2b425ad34e53" kindref="member">eState</ref><sp/>!=<sp/><ref refid="src_2_global_server_def_8h_1a2ea29fb43c02c342774401daa3815e3ba2be7ebbb223eb3708489104b70e60b1a" kindref="member">WSS_UNKOWN</ref>)</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkData-&gt;<ref refid="struct_se_w_g___register_1aee55157f914c7827c6de2b8cf7b0c59e" kindref="member">dwLoginMagic</ref><sp/>!=<sp/><ref refid="_se_ptl_comm_define_8h_1af62c3a00672953c86a2586d53c60663aa051b38374860159471f6a78f1167a7eb" kindref="member">SSD_MSANGO_MAGIC</ref><sp/>||<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref><sp/>==<sp/>0<sp/>||<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref><sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>防止重复注册</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkFindWS<sp/>=<sp/><ref refid="class_global_server_1a0df1684f3285e319ebd96712a47feb42" kindref="member">GetWSByID</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkFindWS)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a59fe2018c00666084724bec1365b41f5" kindref="member">SeLogError</ref>(</highlight><highlight class="stringliteral">&quot;WS<sp/>has<sp/>been<sp/>registered:[%s:%d]<sp/>id[%s]&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>,<sp/><ref refid="_se_tool_8h_1ada81d4ae5d39c42af0a02b45f4a6f715" kindref="member">GetID2Str</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>));</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iDTime<sp/>=<sp/>(int)(<ref refid="class_global_server_1adc2f8b46002eac2c3f52e076a3a107c2" kindref="member">m_dwCurTime</ref><sp/>-<sp/>pkFindWS-&gt;<ref refid="struct_se_w_s_data_1a86148f9d13629aed1e8914be75d21637" kindref="member">dwRecvTime</ref>);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iDTime<sp/>&gt;=<sp/>5000)</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkFindWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>防止重复注册<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>pkFindWS<sp/>=<sp/><ref refid="class_global_server_1ad77611c842810b2e30cafc67166df59d" kindref="member">GetWSByAreaID</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref>);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkFindWS)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a59fe2018c00666084724bec1365b41f5" kindref="member">SeLogError</ref>(</highlight><highlight class="stringliteral">&quot;WS<sp/>has<sp/>been<sp/>registered:[%s:%d]<sp/>areaid[%u]&quot;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>,<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref>);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>防止没响应的连接一直不断开</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iDTime<sp/>=<sp/>(int)(<ref refid="class_global_server_1adc2f8b46002eac2c3f52e076a3a107c2" kindref="member">m_dwCurTime</ref><sp/>-<sp/>pkFindWS-&gt;<ref refid="struct_se_w_s_data_1a86148f9d13629aed1e8914be75d21637" kindref="member">dwRecvTime</ref>);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iDTime<sp/>&gt;=<sp/>5000)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_global_server_1aab15fb083ac582e71e2a686f44b21297" kindref="member">m_kNetMgr</ref>.Disconnect(pkFindWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1ab8d44ccc33163e1fc1aa2b425ad34e53" kindref="member">eState</ref><sp/>=<sp/><ref refid="src_2_global_server_def_8h_1a2ea29fb43c02c342774401daa3815e3ba302e598532950ed6a543c508b7514705" kindref="member">WSS_LOGIN_OK</ref>;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1af325940f9ea9a1f5b4e1c05478a4f43c" kindref="member">dwServerID</ref><sp/>=<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1abac3ec5bcdbbe4c6518693c41f959f09" kindref="member">dwAreaID</ref><sp/>=<sp/>pkData-&gt;<ref refid="struct_se_w_g___register_1a9cef720f68bf963cdeaec657f21864d3" kindref="member">dwAreaID</ref>;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_se_file_log_8h_1a83f3fe470b91cb8eed8762cc8e5e26c3" kindref="member">SeLogInfo</ref>(</highlight><highlight class="stringliteral">&quot;WS<sp/>register<sp/>successfully:[%s:%d]<sp/>id[%s]&quot;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a23b51e87d8b7b2201a03833c9adde232" kindref="member">acIP</ref>,<sp/>pkWS-&gt;<ref refid="struct_se_w_s_data_1a5f3b6eb3e3b530c7ba8f1debf8f91299" kindref="member">kNetAddr</ref>.<ref refid="struct_se_net_addr_1a989fa5b025bc039122e8d2a29838fde9" kindref="member">iPort</ref>,<sp/><ref refid="_se_tool_8h_1ada81d4ae5d39c42af0a02b45f4a6f715" kindref="member">GetID2Str</ref>(pkData-&gt;<ref refid="struct_se_w_g___register_1a444f75d9eee6c013e3f85d700ea22baa" kindref="member">dwServerID</ref>));</highlight></codeline>
<codeline lineno="81"><highlight class="normal">}</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="class_global_server_1abc293b6f7847b2df4e7625dd482ad23b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_global_server_1abc293b6f7847b2df4e7625dd482ad23b" kindref="member">GlobalServer::ProcessWG_HeartPackage</ref>(<ref refid="struct_se_w_g___heart_package" kindref="compound">SeWG_HeartPackage</ref>*<sp/>pkData,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iSize,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>pkSender)</highlight></codeline>
<codeline lineno="84"><highlight class="normal">{</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*<sp/>pkWS<sp/>=<sp/>(<ref refid="struct_se_w_s_data" kindref="compound">SeWSData</ref>*)pkSender;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_global_server_1a2976e9b9c31967780855cf77f017a552" kindref="member">SendGW_HeartPackageRet</ref>(&amp;pkWS-&gt;<ref refid="struct_se_w_s_data_1ad3ea1dc90d4bb1dd98d3dc5089d3ea85" kindref="member">kSock</ref>);</highlight></codeline>
<codeline lineno="88"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="F:/TeamWork/ServerVersion/projects/server/Server/Server/GlobalServer/src/SeWGProcess.cpp"/>
  </compounddef>
</doxygen>
